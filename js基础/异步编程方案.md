# 回调函数

回调中嵌套回调，称为回调地狱。这种代码的可读性和维护性差，并且在每次回调中都要处理成功和失败的情况。

```
fs.readFile('1.json',(err,data)=>{
  fs.readFile('2.json',(err,data)=>{
    ....

  })
})
```

## promise

poromise 很好的解决了回调地狱的问题，合并了错误处理，实现链式调用。链式调用避免了大量的嵌套，方便了编程。

```
 Promise('1.json').
 .then(data =>  {return Promise('2.json')})
 .then(data => {return Promsie('3.json')})

```

# co +generator

用 co 库让代码执行完，同时以同步的方式书写，也让异步操作按顺序执行

```
 co(function* (){
   const r1 = yield readFilePromise('1.json');
   const r2 = yield readFilePromise('2.json');
   const r3 = yield readFilePromise('3.json');
 })
```

# async +await

async 都返回一个 promise 对象，也可以让异步的代码以同步的方式来书写

```
const readFileAsync = async function () {
  const f1 = await readFilePromise('1.json')
  const f2 = await readFilePromise('2.json')
  const f3 = await readFilePromise('3.json')
  const f4 = await readFilePromise('4.json')
}

```
